<table>
  <tbody>
    <% tasks_still.each do |t| %>
    <% if (t.completion_on - Date.today) > -1 %>
    <tr>
      <td>
        <%= link_to edit_vision_task_path(t.vision.id, t.id) do%>
        <%= t.content %>
        <% end %>
      </td>
      <td>締切:<%= t.completion_on %></td>
      <td>残<%=(t.completion_on - Date.today).to_i %>日</td>
      <td>
        <%= form_with model:t, url: vision_complete_path(t.vision.id, t.id), method: :patch do |f| %>
          <%= f.submit "Complete??", style: 'width:150px', class: 'btn btn-outline-danger' %>
        <% end %>
      </td>
    </tr>
    <% else %>
    <tr>
      <td>
        <%= link_to edit_vision_task_path(t.vision.id, t.id) do%>
        <%= t.content %>
        <% end %>
      </td>
      <td>締切:<%= t.completion_on %></td>
      <td><%= (t.completion_on - Date.today).to_i * -1 %>日期限が超過しています</td>
      <td>
        <%= form_with model:t, url: vision_complete_path(t.vision.id, t.id), method: :patch do |f| %>
          <%= f.submit "Complete??", style: 'width:150px', class: 'btn btn-outline-danger' %>
        <% end %>
      </td>
    </tr>
    <% end %>
    <% end %>
    <% tasks_complete.each do |t| %>
    <tr>
      <td><%= t.content %></td>
      <td><%= t.created_at.strftime('%Y-%m-%d') %></td>
    </tr>
    <% end %>
  </tbody>
</table>